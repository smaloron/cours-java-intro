<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-03-28T07:17:49.192484"><title>Les bases de donn&eacute;es | Java Intro</title><script type="application/json" id="virtual-toc-data">[{"id":"jdbc","level":0,"title":"JDBC","anchor":"#jdbc"},{"id":"les-requ-tes-pr-par-es","level":0,"title":"Les requêtes préparées","anchor":"#les-requ-tes-pr-par-es"},{"id":"gestion-des-variables-d-environnement","level":0,"title":"Gestion des variables d\u0027environnement","anchor":"#gestion-des-variables-d-environnement"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b725/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Les bases de donn&eacute;es | Java Intro"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Java Intro Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/008-00-les-bases-de-donnees.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Les bases de donn&eacute;es | Java Intro"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/008-00-les-bases-de-donnees.html#webpage",
    "url": "writerside-documentation/008-00-les-bases-de-donnees.html",
    "name": "Les bases de donn&eacute;es | Java Intro",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Java Intro Help"
}</script><!-- End Schema.org --></head><body data-id="008-00-Les-bases-de-donnees" data-main-title="Les bases de données" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Java Intro  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="008-00-Les-bases-de-donnees" id="008-00-Les-bases-de-donnees.md">Les bases de données</h1><section class="chapter"><h2 id="jdbc" data-toc="jdbc">JDBC</h2><p id="-ze7i6q_6">JDBC (Java Database Connectivity) est une API Java qui permet aux applications Java d'interagir avec des bases de donn&eacute;es relationnelles. Il sert d'interface entre une application Java et un syst&egrave;me de gestion de base de donn&eacute;es (SGBD) en fournissant des classes et des m&eacute;thodes pour &eacute;tablir des connexions, ex&eacute;cuter des requ&ecirc;tes SQL et traiter les r&eacute;sultats.</p><p id="-ze7i6q_7">Pour utiliser JDBC, il faut t&eacute;l&eacute;charger le connecteur correspondant au SGBD que l'on souhaite exploiter. Ce connecteur est une biblioth&egrave;que compil&eacute;e sous la forme d'un fichier <code class="code" id="-ze7i6q_17">.jar</code>.</p><section class="chapter"><h3 id="le-connecteur-mariadb" data-toc="le-connecteur-mariadb">Le connecteur MariaDB</h3><p id="-ze7i6q_18"><a href="https://mariadb.com/downloads/connectors/" id="-ze7i6q_22" data-external="true" rel="noopener noreferrer">https://mariadb.com/downloads/connectors/</a></p><figure id="-ze7i6q_19"><img alt="CleanShot 2025-03-06 at 14.50.30@2x.png" src="images/CleanShot%202025-03-06%20at%2014.50.30%402x.png" title="CleanShot 2025-03-06 at 14.50.30@2x.png" width="2434" height="1490"></figure><p id="-ze7i6q_20">T&eacute;l&eacute;charger le fichier <code class="code" id="-ze7i6q_23">.jar</code> et le placer dans un dossier <code class="code" id="-ze7i6q_24">lib</code> dans votre projet.</p><aside class="prompt" data-type="tip" data-title="" id="-ze7i6q_21"><p id="-ze7i6q_25">Attention : A la compilation, il faudra ajouter le dossier <code class="code" id="-ze7i6q_26">lib</code> au classpath (voir le chapitre sur le build).</p></aside></section><section class="chapter"><h3 id="avec-maven" data-toc="avec-maven">Avec Maven</h3><div class="code-block" data-lang="markup">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;mariadb-fatjar&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;properties&gt;
        &lt;java.version&gt;23&lt;/java.version&gt;
        &lt;main.class&gt;DataBaseTest&lt;/main.class&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!-- MariaDB JDBC Driver --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;
            &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;
            &lt;version&gt;3.1.4&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;finalName&gt;database-app&lt;/finalName&gt;
        &lt;plugins&gt;
            &lt;!-- Shade Plugin pour créer un Fat JAR avec un manifeste --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.4.1&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;phase&gt;package&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;shade&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;transformers&gt;
                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;
                                    &lt;mainClass&gt;${main.class}&lt;/mainClass&gt;
                                &lt;/transformer&gt;
                            &lt;/transformers&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;

            &lt;!-- Compiler Plugin pour Java 17 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;source&gt;${java.version}&lt;/source&gt;
                    &lt;target&gt;${java.version}&lt;/target&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</div></section><section class="chapter"><h3 id="le-fichier-docker-compose" data-toc="le-fichier-docker-compose">Le fichier docker compose</h3><div class="code-block" data-lang="yaml">
services:
  mariadb:
    image: mariadb:latest
    container_name: mariadb_container
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: 123
      MYSQL_DATABASE: formation
    ports:
      - &quot;3306:3306&quot;
    volumes:
      - mariadb_data:/var/lib/mysql
    networks:
      - mariadb_network

volumes:
  mariadb_data:

networks:
  mariadb_network:

</div><div class="code-block" data-lang="none">
CREATE TABLE users(
    id INT UNSIGNED AUTO_INCREMENT,
    username VARCHAR(20) NOT NULL,
    PRIMARY KEY(id)
);

INSERT INTO users (username) VALUES 
('Jane user'), ('Amina admin') ('joe user'), ('Jack admin');
</div></section><section class="chapter"><h3 id="d-finir-une-connexion" data-toc="d-finir-une-connexion">D&eacute;finir une connexion</h3><div class="code-block" data-lang="none">
// Imports au début du fichier
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

// Création de la connexion

try {

    Connection connection = DriverManager.getConnection(
        &lt;URL&gt;, &lt;USER&gt;, &lt;PASSWORD&gt;
    );
    
} catch (SQLException e) {

    System.err.println(
        &quot;Erreur de connexion : &quot; + e.getMessage()
    );
    
}

</div></section><section class="chapter"><h3 id="une-classe-de-connexion" data-toc="une-classe-de-connexion">Une classe de connexion</h3><p id="-ze7i6q_31">Cette classe expose une connection &agrave; la base de donn&eacute;es par le biais d'une m&eacute;thode statique. La connexion est stock&eacute;e dans une variable &eacute;galement statique ce qui permet toujours retourner la m&ecirc;me instance (pattern Singleton).</p><div class="code-block" data-lang="java">
package fr.formation.database;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBConnection {
    // Informations de connexion
    private static final String URL = &quot;jdbc:mariadb://localhost:3306/formation&quot;;
    private static final String USER = &quot;root&quot;;
    private static final String PASSWORD = &quot;123&quot;;
    
    // Connexion unique (singleton)
    private static Connection connection = null;

    // Méthode pour obtenir la connexion
    public static Connection getConnection() {
        try {
            if (connection == null || connection.isClosed()) {
                connection = DriverManager.getConnection(
                    URL, USER, PASSWORD
                );
                System.out.println(&quot;Connexion réussie à MariaDB !&quot;);
            }
        } catch (SQLException e) {
            System.err.println(
                &quot;Erreur de connexion : &quot; + e.getMessage()
            );
        }
        return connection;
    }

    // Méthode pour fermer la connexion
    public static void closeConnection() {
        try {
            if (connection != null &amp;&amp; !connection.isClosed()) {
                connection.close();
                System.out.println(&quot;Connexion fermée.&quot;);
            }
        } catch (SQLException e) {
            System.err.println(
                &quot;Erreur lors de la fermeture : &quot; + e.getMessage()
            );
        }
    }
}
</div></section><section class="chapter"><h3 id="utilisation-de-la-connexion" data-toc="utilisation-de-la-connexion">Utilisation de la connexion</h3><p id="-ze7i6q_33">Une fois la connexion &eacute;tablie, il faut cr&eacute;er un <code class="code" id="-ze7i6q_38">statement</code></p><div class="code-block" data-lang="java">
Connection conn = DBConnection.getConnection();
Statement stmt = conn.createStatement();
</div><p id="-ze7i6q_35">Il faut ensuite ex&eacute;cuter une requ&ecirc;te SQL sur ce <code class="code" id="-ze7i6q_39">Statement</code> avec l'une des m&eacute;thodes suivantes.</p><ul class="list _bullet" id="-ze7i6q_36"><li class="list__item" id="-ze7i6q_40"><p id="-ze7i6q_41"><code class="code" id="-ze7i6q_42">executeQuery(String sql)</code>:</p></li></ul><div class="table-wrapper"><table class="wide" id="-ze7i6q_37"><thead><tr class="ijRowHead" id="-ze7i6q_43"><th id="-ze7i6q_47"><p>M&eacute;thode</p></th><th id="-ze7i6q_48"><p>Description</p></th></tr></thead><tbody><tr id="-ze7i6q_44"><td id="-ze7i6q_49"><p><code class="code" id="-ze7i6q_51">executeQuery(String sql)</code></p></td><td id="-ze7i6q_50"><p>Ex&eacute;cute une requ&ecirc;te SQL de type <code class="code" id="-ze7i6q_52">SELECT</code> et retourne un <code class="code" id="-ze7i6q_53">ResultSet</code> contenant les r&eacute;sultats.</p></td></tr><tr id="-ze7i6q_45"><td id="-ze7i6q_54"><p><code class="code" id="-ze7i6q_56">executeUpdate(String sql)</code></p></td><td id="-ze7i6q_55"><p>Ex&eacute;cute une requ&ecirc;te SQL de type <code class="code" id="-ze7i6q_57">INSERT</code>, <code class="code" id="-ze7i6q_58">UPDATE</code>, <code class="code" id="-ze7i6q_59">DELETE</code> ou <code class="code" id="-ze7i6q_60">DDL</code> (<code class="code" id="-ze7i6q_61">CREATE</code>, <code class="code" id="-ze7i6q_62">DROP</code>, etc.) et retourne un int indiquant le nombre de lignes affect&eacute;es.</p></td></tr><tr id="-ze7i6q_46"><td id="-ze7i6q_63"><p><code class="code" id="-ze7i6q_65">execute(String sql)</code></p></td><td id="-ze7i6q_64"><p>Ex&eacute;cute une requ&ecirc;te SQL qui peut &ecirc;tre de n'importe quel type (<code class="code" id="-ze7i6q_66">SELECT</code>, <code class="code" id="-ze7i6q_67">INSERT</code>, <code class="code" id="-ze7i6q_68">UPDATE</code>, `DELETE, etc.). Retourne un boolean : true si le premier r&eacute;sultat est un ResultSet, false sinon.</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="exploitation-du-resultset" data-toc="exploitation-du-resultset">Exploitation du ResultSet</h3><p id="-ze7i6q_69">Un objet <code class="code" id="-ze7i6q_72">ResultSet</code> repr&eacute;sente le r&eacute;sultat d'une requ&ecirc;te SQL. Il inclut un curseur qui permet de naviguer au sein des lignes retourn&eacute;es par la requ&ecirc;te.</p><p id="-ze7i6q_70">&Agrave; la cr&eacute;ation du <code class="code" id="-ze7i6q_73">ResultSet</code> ce curseur est positionn&eacute; juste avant la premi&egrave;re ligne.</p><div class="table-wrapper"><table class="wide" id="-ze7i6q_71"><thead><tr class="ijRowHead" id="-ze7i6q_74"><th id="-ze7i6q_86"><p>M&eacute;thode</p></th><th id="-ze7i6q_87"><p>Description</p></th></tr></thead><tbody><tr id="-ze7i6q_75"><td id="-ze7i6q_88"><p><code class="code" id="-ze7i6q_90">boolean next()</code></p></td><td id="-ze7i6q_89"><p>Avance d'une ligne, retourne <code class="code" id="-ze7i6q_91">true</code> si une ligne existe.</p></td></tr><tr id="-ze7i6q_76"><td id="-ze7i6q_92"><p><code class="code" id="-ze7i6q_94">boolean previous()</code></p></td><td id="-ze7i6q_93"><p>Recule d'une ligne, retourne <code class="code" id="-ze7i6q_95">true</code> si une ligne existe.</p></td></tr><tr id="-ze7i6q_77"><td id="-ze7i6q_96"><p><code class="code" id="-ze7i6q_98">boolean first()</code></p></td><td id="-ze7i6q_97"><p>Se place sur la premi&egrave;re ligne du <code class="code" id="-ze7i6q_99">ResultSet</code>.</p></td></tr><tr id="-ze7i6q_78"><td id="-ze7i6q_100"><p><code class="code" id="-ze7i6q_102">boolean last()</code></p></td><td id="-ze7i6q_101"><p>Se place sur la derni&egrave;re ligne du <code class="code" id="-ze7i6q_103">ResultSet</code>.</p></td></tr><tr id="-ze7i6q_79"><td id="-ze7i6q_104"><p><code class="code" id="-ze7i6q_106">boolean absolute(int row)</code></p></td><td id="-ze7i6q_105"><p>Va directement &agrave; la ligne <code class="code" id="-ze7i6q_107">row</code> (indice 1 pour la premi&egrave;re ligne) .</p></td></tr><tr id="-ze7i6q_80"><td id="-ze7i6q_108"><p><code class="code" id="-ze7i6q_110">boolean relative(int rows)</code></p></td><td id="-ze7i6q_109"><p>D&eacute;place le curseur de <code class="code" id="-ze7i6q_111">rows</code> lignes (+ pour avancer, - pour reculer).</p></td></tr><tr id="-ze7i6q_81"><td id="-ze7i6q_112"><p><code class="code" id="-ze7i6q_114">boolean isBeforeFirst()</code></p></td><td id="-ze7i6q_113"><p>V&eacute;rifie si le curseur est avant la premi&egrave;re ligne.</p></td></tr><tr id="-ze7i6q_82"><td id="-ze7i6q_115"><p><code class="code" id="-ze7i6q_117">boolean isAfterLast()</code></p></td><td id="-ze7i6q_116"><p>V&eacute;rifie si le curseur est apr&egrave;s la derni&egrave;re ligne.</p></td></tr><tr id="-ze7i6q_83"><td id="-ze7i6q_118"><p><code class="code" id="-ze7i6q_120">boolean isFirst()</code></p></td><td id="-ze7i6q_119"><p>V&eacute;rifie si le curseur est sur la premi&egrave;re ligne.</p></td></tr><tr id="-ze7i6q_84"><td id="-ze7i6q_121"><p><code class="code" id="-ze7i6q_123">boolean isLast()</code></p></td><td id="-ze7i6q_122"><p>V&eacute;rifie si le curseur est sur la derni&egrave;re ligne.</p></td></tr><tr id="-ze7i6q_85"><td id="-ze7i6q_124"><p><code class="code" id="-ze7i6q_126">int getRow()</code></p></td><td id="-ze7i6q_125"><p>Retourne le num&eacute;ro de la ligne actuelle.</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="r-cup-ration-des-donn-es" data-toc="r-cup-ration-des-donn-es">R&eacute;cup&eacute;ration des donn&eacute;es</h3><p id="-ze7i6q_127">Les m&eacute;thodes suivantes permettent de r&eacute;cup&eacute;rer les donn&eacute;es d'une colonne au sein de la ligne en cours.</p><div class="table-wrapper"><table class="wide" id="-ze7i6q_128"><thead><tr class="ijRowHead" id="-ze7i6q_131"><th id="-ze7i6q_154"><p>M&eacute;thode</p></th><th id="-ze7i6q_155"><p>Type de retour</p></th><th id="-ze7i6q_156"><p>Description</p></th></tr></thead><tbody><tr id="-ze7i6q_132"><td id="-ze7i6q_157"><p><code class="code" id="-ze7i6q_160">int getInt(String columnLabel)</code></p></td><td id="-ze7i6q_158"><p><code class="code" id="-ze7i6q_161">int</code></p></td><td id="-ze7i6q_159"><p>R&eacute;cup&egrave;re une valeur enti&egrave;re.</p></td></tr><tr id="-ze7i6q_133"><td id="-ze7i6q_162"><p><code class="code" id="-ze7i6q_165">int getInt(int columnIndex)</code></p></td><td id="-ze7i6q_163"><p><code class="code" id="-ze7i6q_166">int</code></p></td><td id="-ze7i6q_164"><p>R&eacute;cup&egrave;re une valeur enti&egrave;re via l'index de la colonne.</p></td></tr><tr id="-ze7i6q_134"><td id="-ze7i6q_167"><p><code class="code" id="-ze7i6q_170">String getString(String columnLabel)</code></p></td><td id="-ze7i6q_168"><p><code class="code" id="-ze7i6q_171">String</code></p></td><td id="-ze7i6q_169"><p>R&eacute;cup&egrave;re une cha&icirc;ne de caract&egrave;res.</p></td></tr><tr id="-ze7i6q_135"><td id="-ze7i6q_172"><p><code class="code" id="-ze7i6q_175">String getString(int columnIndex)</code></p></td><td id="-ze7i6q_173"><p><code class="code" id="-ze7i6q_176">String</code></p></td><td id="-ze7i6q_174"><p>R&eacute;cup&egrave;re une cha&icirc;ne de caract&egrave;res via l'index.</p></td></tr><tr id="-ze7i6q_136"><td id="-ze7i6q_177"><p><code class="code" id="-ze7i6q_180">double getDouble(String columnLabel)</code></p></td><td id="-ze7i6q_178"><p><code class="code" id="-ze7i6q_181">double</code></p></td><td id="-ze7i6q_179"><p>R&eacute;cup&egrave;re une valeur d&eacute;cimale.</p></td></tr><tr id="-ze7i6q_137"><td id="-ze7i6q_182"><p><code class="code" id="-ze7i6q_185">double getDouble(int columnIndex)</code></p></td><td id="-ze7i6q_183"><p><code class="code" id="-ze7i6q_186">double</code></p></td><td id="-ze7i6q_184"><p>R&eacute;cup&egrave;re une valeur d&eacute;cimale via l'index.</p></td></tr><tr id="-ze7i6q_138"><td id="-ze7i6q_187"><p><code class="code" id="-ze7i6q_190">boolean getBoolean(String columnLabel)</code></p></td><td id="-ze7i6q_188"><p><code class="code" id="-ze7i6q_191">boolean</code></p></td><td id="-ze7i6q_189"><p>R&eacute;cup&egrave;re un bool&eacute;en.</p></td></tr><tr id="-ze7i6q_139"><td id="-ze7i6q_192"><p><code class="code" id="-ze7i6q_195">boolean getBoolean(int columnIndex)</code></p></td><td id="-ze7i6q_193"><p><code class="code" id="-ze7i6q_196">boolean</code></p></td><td id="-ze7i6q_194"><p>R&eacute;cup&egrave;re un bool&eacute;en via l'index.</p></td></tr><tr id="-ze7i6q_140"><td id="-ze7i6q_197"><p><code class="code" id="-ze7i6q_200">Date getDate(String columnLabel)</code></p></td><td id="-ze7i6q_198"><p><code class="code" id="-ze7i6q_201">Date</code></p></td><td id="-ze7i6q_199"><p>R&eacute;cup&egrave;re une date SQL.</p></td></tr><tr id="-ze7i6q_141"><td id="-ze7i6q_202"><p><code class="code" id="-ze7i6q_205">Date getDate(int columnIndex)</code></p></td><td id="-ze7i6q_203"><p><code class="code" id="-ze7i6q_206">Date</code></p></td><td id="-ze7i6q_204"><p>R&eacute;cup&egrave;re une date SQL via l'index.</p></td></tr><tr id="-ze7i6q_142"><td id="-ze7i6q_207"><p><code class="code" id="-ze7i6q_210">Timestamp getTimestamp(String columnLabel)</code></p></td><td id="-ze7i6q_208"><p><code class="code" id="-ze7i6q_211">Timestamp</code></p></td><td id="-ze7i6q_209"><p>R&eacute;cup&egrave;re un timestamp SQL.</p></td></tr><tr id="-ze7i6q_143"><td id="-ze7i6q_212"><p><code class="code" id="-ze7i6q_215">Timestamp getTimestamp(int columnIndex)</code></p></td><td id="-ze7i6q_213"><p><code class="code" id="-ze7i6q_216">Timestamp</code></p></td><td id="-ze7i6q_214"><p>R&eacute;cup&egrave;re un timestamp SQL via l'index.</p></td></tr><tr id="-ze7i6q_144"><td id="-ze7i6q_217"><p><code class="code" id="-ze7i6q_220">Object getObject(String columnLabel)</code></p></td><td id="-ze7i6q_218"><p><code class="code" id="-ze7i6q_221">Object</code></p></td><td id="-ze7i6q_219"><p>R&eacute;cup&egrave;re un objet g&eacute;n&eacute;rique.</p></td></tr><tr id="-ze7i6q_145"><td id="-ze7i6q_222"><p><code class="code" id="-ze7i6q_225">Object getObject(int columnIndex)</code></p></td><td id="-ze7i6q_223"><p><code class="code" id="-ze7i6q_226">Object</code></p></td><td id="-ze7i6q_224"><p>R&eacute;cup&egrave;re un objet via l'index.</p></td></tr><tr id="-ze7i6q_146"><td id="-ze7i6q_227"><p><code class="code" id="-ze7i6q_230">InputStream getBinaryStream(String columnLabel)</code></p></td><td id="-ze7i6q_228"><p><code class="code" id="-ze7i6q_231">InputStream</code></p></td><td id="-ze7i6q_229"><p>R&eacute;cup&egrave;re un flux binaire (ex: fichier).</p></td></tr><tr id="-ze7i6q_147"><td id="-ze7i6q_232"><p><code class="code" id="-ze7i6q_235">InputStream getBinaryStream(int columnIndex)</code></p></td><td id="-ze7i6q_233"><p><code class="code" id="-ze7i6q_236">InputStream</code></p></td><td id="-ze7i6q_234"><p>R&eacute;cup&egrave;re un flux binaire via l'index.</p></td></tr><tr id="-ze7i6q_148"><td id="-ze7i6q_237"><p><code class="code" id="-ze7i6q_240">Blob getBlob(String columnLabel)</code></p></td><td id="-ze7i6q_238"><p><code class="code" id="-ze7i6q_241">Blob</code></p></td><td id="-ze7i6q_239"><p>R&eacute;cup&egrave;re un objet BLOB (Binary Large Object).</p></td></tr><tr id="-ze7i6q_149"><td id="-ze7i6q_242"><p><code class="code" id="-ze7i6q_245">Blob getBlob(int columnIndex)</code></p></td><td id="-ze7i6q_243"><p><code class="code" id="-ze7i6q_246">Blob</code></p></td><td id="-ze7i6q_244"><p>R&eacute;cup&egrave;re un objet BLOB via l'index.</p></td></tr><tr id="-ze7i6q_150"><td id="-ze7i6q_247"><p><code class="code" id="-ze7i6q_250">Clob getClob(String columnLabel)</code></p></td><td id="-ze7i6q_248"><p><code class="code" id="-ze7i6q_251">Clob</code></p></td><td id="-ze7i6q_249"><p>R&eacute;cup&egrave;re un objet CLOB (Character Large Object).</p></td></tr><tr id="-ze7i6q_151"><td id="-ze7i6q_252"><p><code class="code" id="-ze7i6q_255">Clob getClob(int columnIndex)</code></p></td><td id="-ze7i6q_253"><p><code class="code" id="-ze7i6q_256">Clob</code></p></td><td id="-ze7i6q_254"><p>R&eacute;cup&egrave;re un objet CLOB via l'index.</p></td></tr><tr id="-ze7i6q_152"><td id="-ze7i6q_257"><p><code class="code" id="-ze7i6q_260">BigDecimal getBigDecimal(String columnLabel)</code></p></td><td id="-ze7i6q_258"><p><code class="code" id="-ze7i6q_261">BigDecimal</code></p></td><td id="-ze7i6q_259"><p>R&eacute;cup&egrave;re un nombre d&eacute;cimal de grande pr&eacute;cision.</p></td></tr><tr id="-ze7i6q_153"><td id="-ze7i6q_262"><p><code class="code" id="-ze7i6q_265">BigDecimal getBigDecimal(int columnIndex)</code></p></td><td id="-ze7i6q_263"><p><code class="code" id="-ze7i6q_266">BigDecimal</code></p></td><td id="-ze7i6q_264"><p>R&eacute;cup&egrave;re un nombre d&eacute;cimal via l'index.</p></td></tr></tbody></table></div><p id="-ze7i6q_129"><span class="control" id="-ze7i6q_267">Remarques :</span></p><ul class="list _bullet" id="-ze7i6q_130"><li class="list__item" id="-ze7i6q_268"><p id="-ze7i6q_271">columnLabel correspond au nom de la colonne dans la base de donn&eacute;es.</p></li><li class="list__item" id="-ze7i6q_269"><p id="-ze7i6q_272">columnIndex commence &agrave; 1 et non 0.</p></li><li class="list__item" id="-ze7i6q_270"><p id="-ze7i6q_273">Il existe aussi des variantes comme getFloat(), getShort(), getLong(), etc.</p></li></ul></section><section class="chapter"><h3 id="ex-cution-d-une-requ-te-de-s-lection" data-toc="ex-cution-d-une-requ-te-de-s-lection">Ex&eacute;cution d'une requ&ecirc;te de s&eacute;lection</h3><div class="code-block" data-lang="java">
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class UserSelect {

    public static void main(String[] args) {
     
       try {
           // Récupérer la connexion
           Connection conn = DBConnection.getConnection();
           // Exécuter une requête SQL
           String sql = &quot;SELECT * FROM users&quot;;
           Statement stmt = conn.createStatement();
           ResultSet rs = stmt.executeQuery(sql);

           // Boucle sur le resultSet
           while (rs.next()) {
               System.out.println(
                   &quot;User: &quot; + rs.getString(&quot;username&quot;)
               );
           }

           // Fermer les ressources
           rs.close();
           stmt.close();
           DatabaseConnection.closeConnection();
       } catch (SQLException e) {
           e.printStackTrace();
       }
        
    }
}
</div></section></section><section class="chapter"><h2 id="les-requ-tes-pr-par-es" data-toc="les-requ-tes-pr-par-es">Les requ&ecirc;tes pr&eacute;par&eacute;es</h2><p id="-ze7i6q_275">L'objet <code class="code" id="-ze7i6q_281">PreparedStatement</code> compile une requ&ecirc;te avec des espaces r&eacute;serv&eacute;s (placeholders) pour les variables. Les valeurs seront pass&eacute;es lors de l'ex&eacute;cution de la requ&ecirc;te.</p><p id="-ze7i6q_276"><span class="control" id="-ze7i6q_282">Int&eacute;r&ecirc;ts :</span></p><ul class="list _bullet" id="-ze7i6q_277"><li class="list__item" id="-ze7i6q_283"><p id="-ze7i6q_285">Protection contre les injections SQL</p></li><li class="list__item" id="-ze7i6q_284"><p id="-ze7i6q_286">Possibilit&eacute; d'ex&eacute;cuter plusieurs fois la m&ecirc;me requ&ecirc;te compil&eacute;e avec des param&egrave;tres diff&eacute;rents.</p></li></ul><section class="chapter"><h3 id="fonctionnement" data-toc="fonctionnement">Fonctionnement</h3><p id="-ze7i6q_287">Dans la requ&ecirc;te, les param&egrave;tres variables sont remplac&eacute;s par des <code class="code" id="-ze7i6q_293">?</code>.</p><p id="-ze7i6q_288">On instancie ensuite la classe <code class="code" id="-ze7i6q_294">PreparedStatement</code> en lui passant la requ&ecirc;te SQL en argument.</p><p id="-ze7i6q_289">La valorisation des param&egrave;tres s'effectue avec l'appel &agrave; une m&eacute;thode setter qui admet deux arguments :</p><ul class="list _bullet" id="-ze7i6q_290"><li class="list__item" id="-ze7i6q_295"><p id="-ze7i6q_297">la position du placeholder (le premier est 1)</p></li><li class="list__item" id="-ze7i6q_296"><p id="-ze7i6q_298">la valeur du param&egrave;tre</p></li></ul><p id="-ze7i6q_291"><span class="control" id="-ze7i6q_299">Les m&eacute;thodes <code class="code" id="-ze7i6q_300">setter</code> de <code class="code" id="-ze7i6q_301">PreparedStatement</code></span></p><div class="table-wrapper"><table class="wide" id="-ze7i6q_292"><thead><tr class="ijRowHead" id="-ze7i6q_302"><th id="-ze7i6q_317"><p>M&eacute;thode</p></th><th id="-ze7i6q_318"><p>Type de donn&eacute;es attendu</p></th></tr></thead><tbody><tr id="-ze7i6q_303"><td id="-ze7i6q_319"><p><code class="code" id="-ze7i6q_321">setInt(int parameterIndex, int value)</code></p></td><td id="-ze7i6q_320"><p><code class="code" id="-ze7i6q_322">int</code></p></td></tr><tr id="-ze7i6q_304"><td id="-ze7i6q_323"><p><code class="code" id="-ze7i6q_325">setLong(int parameterIndex, long value)</code></p></td><td id="-ze7i6q_324"><p><code class="code" id="-ze7i6q_326">long</code></p></td></tr><tr id="-ze7i6q_305"><td id="-ze7i6q_327"><p><code class="code" id="-ze7i6q_329">setFloat(int parameterIndex, float value)</code></p></td><td id="-ze7i6q_328"><p><code class="code" id="-ze7i6q_330">float</code></p></td></tr><tr id="-ze7i6q_306"><td id="-ze7i6q_331"><p><code class="code" id="-ze7i6q_333">setDouble(int parameterIndex, double value)</code></p></td><td id="-ze7i6q_332"><p><code class="code" id="-ze7i6q_334">double</code></p></td></tr><tr id="-ze7i6q_307"><td id="-ze7i6q_335"><p><code class="code" id="-ze7i6q_337">setBigDecimal(int parameterIndex, BigDecimal value)</code></p></td><td id="-ze7i6q_336"><p><code class="code" id="-ze7i6q_338">BigDecimal</code></p></td></tr><tr id="-ze7i6q_308"><td id="-ze7i6q_339"><p><code class="code" id="-ze7i6q_341">setString(int parameterIndex, String value)</code></p></td><td id="-ze7i6q_340"><p><code class="code" id="-ze7i6q_342">String</code></p></td></tr><tr id="-ze7i6q_309"><td id="-ze7i6q_343"><p><code class="code" id="-ze7i6q_345">setBoolean(int parameterIndex, boolean value)</code></p></td><td id="-ze7i6q_344"><p><code class="code" id="-ze7i6q_346">boolean</code></p></td></tr><tr id="-ze7i6q_310"><td id="-ze7i6q_347"><p><code class="code" id="-ze7i6q_349">setByte(int parameterIndex, byte value)</code></p></td><td id="-ze7i6q_348"><p><code class="code" id="-ze7i6q_350">byte</code></p></td></tr><tr id="-ze7i6q_311"><td id="-ze7i6q_351"><p><code class="code" id="-ze7i6q_353">setBytes(int parameterIndex, byte[] value)</code></p></td><td id="-ze7i6q_352"><p><code class="code" id="-ze7i6q_354">byte[]</code></p></td></tr><tr id="-ze7i6q_312"><td id="-ze7i6q_355"><p><code class="code" id="-ze7i6q_357">setDate(int parameterIndex, java.sql.Date value)</code></p></td><td id="-ze7i6q_356"><p><code class="code" id="-ze7i6q_358">java.sql.Date</code></p></td></tr><tr id="-ze7i6q_313"><td id="-ze7i6q_359"><p><code class="code" id="-ze7i6q_361">setTime(int parameterIndex, java.sql.Time value)</code></p></td><td id="-ze7i6q_360"><p><code class="code" id="-ze7i6q_362">java.sql.Time</code></p></td></tr><tr id="-ze7i6q_314"><td id="-ze7i6q_363"><p><code class="code" id="-ze7i6q_365">setTimestamp(int parameterIndex, java.sql.Timestamp value)</code></p></td><td id="-ze7i6q_364"><p><code class="code" id="-ze7i6q_366">java.sql.Timestamp</code></p></td></tr><tr id="-ze7i6q_315"><td id="-ze7i6q_367"><p><code class="code" id="-ze7i6q_369">setObject(int parameterIndex, Object value)</code></p></td><td id="-ze7i6q_368"><p><code class="code" id="-ze7i6q_370">Object</code> (g&eacute;n&eacute;rique)</p></td></tr><tr id="-ze7i6q_316"><td id="-ze7i6q_371"><p><code class="code" id="-ze7i6q_373">setNull(int parameterIndex, int sqlType)</code></p></td><td id="-ze7i6q_372"><p>Valeur <code class="code" id="-ze7i6q_374">NULL</code></p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="un-exemple-avec-select" data-toc="un-exemple-avec-select">Un exemple avec SELECT</h3><div class="code-block" data-lang="java">
String sql = &quot;SELECT id, name, email FROM users WHERE email = ?&quot;;
try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
    pstmt.setString(1, &quot;alice@example.com&quot;);

    try (ResultSet rs = pstmt.executeQuery()) {
        while (rs.next()) {
            int id = rs.getInt(&quot;id&quot;);
            String name = rs.getString(&quot;name&quot;);
            String email = rs.getString(&quot;email&quot;);
            System.out.println(id + &quot; - &quot; + name + &quot; - &quot; + email);
        }
    }
}
</div></section><section class="chapter"><h3 id="un-exemple-avec-insert" data-toc="un-exemple-avec-insert">Un exemple avec INSERT</h3><div class="code-block" data-lang="java">
import java.sql.*;

public class JDBCExample {
    public static void main(String[] args) {
        // Paramètres de connexion
        String url = &quot;jdbc:mysql://localhost:3306/mydatabase&quot;;
        String user = &quot;root&quot;;
        String password = &quot;password&quot;;

        // Requête SQL avec des paramètres
        String sql = &quot;INSERT INTO users (name, email) VALUES (?, ?)&quot;;

        try (
            Connection conn = DriverManager.getConnection(url, user, password);
            PreparedStatement pstmt = conn.prepareStatement(sql);
        ) {
            // Remplacement des paramètres
            pstmt.setString(1, &quot;Alice&quot;);
            pstmt.setString(2, &quot;alice@example.com&quot;);

            // Exécution de la requête
            int rowsInserted = pstmt.executeUpdate();
            System.out.println(rowsInserted + &quot; ligne(s) insérée(s).&quot;);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
</div></section></section><section class="chapter"><h2 id="gestion-des-variables-d-environnement" data-toc="gestion-des-variables-d-environnement">Gestion des variables d'environnement</h2><p id="-ze7i6q_377">Utiliser des variables d'environnement pour stocker les informations sensibles d'une application est une tr&egrave;s bonne id&eacute;e. Sur le serveur de production, l'application utilisera donc ses variables, sur le poste du d&eacute;veloppeur, celle-ci seront simul&eacute;s au sein d'un fichier <code class="code" id="-ze7i6q_383">.env</code>.</p><p id="-ze7i6q_378">Il faut donc un moyen pour charger ses donn&eacute;es, soit depuis un fichier soit depuis les variables d'environnement. La biblioth&egrave;que <code class="code" id="-ze7i6q_384">java-dotenv</code> a justement &eacute;t&eacute; con&ccedil;ue pour &ccedil;a.</p><p id="-ze7i6q_379">Elle est distribu&eacute;e sous la forme d'un fichier jar qu'il faut <a href="https://jar-download.com/artifact-search/java-dotenv" id="-ze7i6q_385" data-external="true" rel="noopener noreferrer">t&eacute;l&eacute;charger</a></p><p id="-ze7i6q_380">Il faudra ensuite ajouter ce fichier aux d&eacute;pendances du projet.</p><section class="chapter"><h3 id="installation-avec-maven" data-toc="installation-avec-maven">Installation avec Maven</h3><div class="code-block" data-lang="markup">
&lt;dependency&gt;
    &lt;groupId&gt;io.github.cdimascio&lt;/groupId&gt;
    &lt;artifactId&gt;dotenv-java&lt;/artifactId&gt;
    &lt;version&gt;3.2.0&lt;/version&gt;
&lt;/dependency&gt;
</div></section><section class="chapter"><h3 id="utilisation" data-toc="utilisation">Utilisation</h3><p id="-ze7i6q_387">Par d&eacute;faut <code class="code" id="-ze7i6q_393">java-dotenv</code> recherche un fichier <code class="code" id="-ze7i6q_394">.env</code> &agrave; la racine du projet.</p><p id="-ze7i6q_388">S'il existe une variable d'environnement du m&ecirc;me nom, elle aura priorit&eacute; sur la variable d&eacute;finie dans <code class="code" id="-ze7i6q_395">.env</code>.</p><div class="code-block" data-lang="none">
# fichier .env

# Utilisateur pour la connexion à la base de données
DB_USER=root
DB_PASS=123
DB_URL=jdbc:mariadb://localhost:3306/formation
</div><div class="code-block" data-lang="java">
// chargement du fichier
Dotenv dotenv = Dotenv.load();

// Récupération d'une variable
String user = dotenv.get(&quot;DB_USER&quot;)
</div><section class="chapter"><h4 id="valeur-par-d-faut" data-toc="valeur-par-d-faut">Valeur par d&eacute;faut</h4><div class="code-block" data-lang="java">
// Récupération d'une variable
// Le deuxième argument est la valeur par défaut
// si la clef est absente dans .env
String user = dotenv.get(&quot;DB_USER&quot;, &quot;web_user&quot;)
</div></section><section class="chapter"><h4 id="chemin-du-fichier-env" data-toc="chemin-du-fichier-env">Chemin du fichier .env</h4><div class="code-block" data-lang="java">
Dotenv dotenv = Dotenv.configure()
                      .directory(&quot;/env&quot;)
                      .filename(&quot;.env-dev&quot;)
                      .load();
</div></section></section></section><div class="last-modified">Last modified: 28 mars 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="007-00-le-pattern-mvc.html" class="navigation-links__prev">Le pattern MVC</a><a href="008-01-le-pattern-dao.html" class="navigation-links__next">Le pattern DAO</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b725/app.js"></script></body></html>